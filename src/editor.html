<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Markdown Editor</title>
    <link rel="stylesheet" href="./editor.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <!-- 顶部工具栏 -->
    <header class="toolbar" id="toolbar">
      <div class="toolbar-left">
        <div class="logo">
          <svg
            width="20"
            height="20"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <path
              d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"
            />
            <polyline points="14,2 14,8 20,8" />
            <line x1="16" y1="13" x2="8" y2="13" />
            <line x1="16" y1="17" x2="8" y2="17" />
            <polyline points="10,9 9,9 8,9" />
          </svg>
          <span class="logo-text">MD Editor</span>
        </div>
        <div class="file-info">
          <span class="filename" id="filename">未打开文件</span>
          <span
            class="modified-indicator"
            id="modifiedIndicator"
            style="display: none"
            >●</span
          >
        </div>
      </div>

      <div class="toolbar-center">
        <!-- 文件操作 -->
        <div class="toolbar-group">
          <button class="toolbar-btn" id="btnOpen" title="打开文件 (Ctrl+O)">
            <svg
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path
                d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"
              />
            </svg>
          </button>
          <button class="toolbar-btn" id="btnSave" title="保存文件 (Ctrl+S)">
            <svg
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path
                d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"
              />
              <polyline points="17,21 17,13 7,13 7,21" />
              <polyline points="7,3 7,8 15,8" />
            </svg>
          </button>
          <button class="toolbar-btn" id="btnNew" title="新建文件">
            <svg
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path
                d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"
              />
              <line x1="12" y1="10" x2="12" y2="18" />
              <line x1="8" y1="14" x2="16" y2="14" />
            </svg>
          </button>
        </div>

        <div class="toolbar-divider"></div>

        <!-- 格式化按钮 -->
        <div class="toolbar-group">
          <button class="toolbar-btn" id="btnBold" title="加粗 (Ctrl+B)">
            <strong>B</strong>
          </button>
          <button class="toolbar-btn" id="btnItalic" title="斜体 (Ctrl+I)">
            <em>I</em>
          </button>
          <button class="toolbar-btn" id="btnStrike" title="删除线">
            <s>S</s>
          </button>
          <button class="toolbar-btn" id="btnCode" title="行内代码">
            <svg
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <polyline points="16,18 22,12 16,6" />
              <polyline points="8,6 2,12 8,18" />
            </svg>
          </button>
        </div>

        <div class="toolbar-divider"></div>

        <div class="toolbar-group">
          <button class="toolbar-btn" id="btnH1" title="一级标题">H1</button>
          <button class="toolbar-btn" id="btnH2" title="二级标题">H2</button>
          <button class="toolbar-btn" id="btnH3" title="三级标题">H3</button>
        </div>

        <div class="toolbar-divider"></div>

        <div class="toolbar-group">
          <button class="toolbar-btn" id="btnUL" title="无序列表">
            <svg
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <line x1="8" y1="6" x2="21" y2="6" />
              <line x1="8" y1="12" x2="21" y2="12" />
              <line x1="8" y1="18" x2="21" y2="18" />
              <circle cx="4" cy="6" r="1" fill="currentColor" />
              <circle cx="4" cy="12" r="1" fill="currentColor" />
              <circle cx="4" cy="18" r="1" fill="currentColor" />
            </svg>
          </button>
          <button class="toolbar-btn" id="btnOL" title="有序列表">
            <svg
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <line x1="10" y1="6" x2="21" y2="6" />
              <line x1="10" y1="12" x2="21" y2="12" />
              <line x1="10" y1="18" x2="21" y2="18" />
              <text x="2" y="8" font-size="8" fill="currentColor" stroke="none">
                1
              </text>
              <text
                x="2"
                y="14"
                font-size="8"
                fill="currentColor"
                stroke="none"
              >
                2
              </text>
              <text
                x="2"
                y="20"
                font-size="8"
                fill="currentColor"
                stroke="none"
              >
                3
              </text>
            </svg>
          </button>
          <button class="toolbar-btn" id="btnQuote" title="引用">
            <svg
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path d="M3 21c3-7 3-12 0-18" />
              <line x1="9" y1="6" x2="21" y2="6" />
              <line x1="9" y1="12" x2="21" y2="12" />
              <line x1="9" y1="18" x2="21" y2="18" />
            </svg>
          </button>
          <button class="toolbar-btn" id="btnCodeBlock" title="代码块">
            <svg
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <rect x="3" y="3" width="18" height="18" rx="2" ry="2" />
              <polyline points="9,8 5,12 9,16" />
              <polyline points="15,8 19,12 15,16" />
            </svg>
          </button>
          <button class="toolbar-btn" id="btnLink" title="链接">
            <svg
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path
                d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"
              />
              <path
                d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"
              />
            </svg>
          </button>
          <button class="toolbar-btn" id="btnTable" title="表格">
            <svg
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <rect x="3" y="3" width="18" height="18" rx="2" ry="2" />
              <line x1="3" y1="9" x2="21" y2="9" />
              <line x1="3" y1="15" x2="21" y2="15" />
              <line x1="9" y1="3" x2="9" y2="21" />
              <line x1="15" y1="3" x2="15" y2="21" />
            </svg>
          </button>
          <button class="toolbar-btn" id="btnHR" title="水平线">
            <svg
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <line x1="2" y1="12" x2="22" y2="12" />
            </svg>
          </button>
        </div>
      </div>

      <div class="toolbar-right">
        <!-- 视图模式 -->
        <div class="toolbar-group view-mode-group">
          <button
            class="toolbar-btn view-btn active"
            id="btnViewSplit"
            title="分屏模式"
            data-mode="split"
          >
            <svg
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <rect x="3" y="3" width="18" height="18" rx="2" />
              <line x1="12" y1="3" x2="12" y2="21" />
            </svg>
          </button>
          <button
            class="toolbar-btn view-btn"
            id="btnViewEdit"
            title="纯编辑模式"
            data-mode="edit"
          >
            <svg
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path
                d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"
              />
              <path
                d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"
              />
            </svg>
          </button>
          <button
            class="toolbar-btn view-btn"
            id="btnViewPreview"
            title="纯预览模式"
            data-mode="preview"
          >
            <svg
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z" />
              <circle cx="12" cy="12" r="3" />
            </svg>
          </button>
        </div>

        <div class="toolbar-divider"></div>

        <!-- 主题切换 -->
        <button class="toolbar-btn" id="btnTheme" title="切换主题">
          <svg
            width="16"
            height="16"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            id="themeIcon"
          >
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" />
          </svg>
        </button>
      </div>
    </header>

    <!-- 主编辑区域 -->
    <main class="editor-main" id="editorMain">
      <!-- 文件浏览器侧边栏 -->
      <aside class="file-sidebar" id="fileSidebar">
        <div class="sidebar-header">
          <span class="sidebar-title">文件</span>
          <div class="sidebar-actions">
            <button class="sidebar-action-btn" id="btnOpenFolder" title="打开文件夹">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"/>
                <line x1="12" y1="11" x2="12" y2="17"/>
                <line x1="9" y1="14" x2="15" y2="14"/>
              </svg>
            </button>
            <button class="sidebar-action-btn" id="btnRefreshTree" title="刷新">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="23,4 23,10 17,10"/>
                <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"/>
              </svg>
            </button>
            <button class="sidebar-action-btn" id="btnCollapseSidebar" title="收起侧边栏">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="11,17 6,12 11,7"/>
                <polyline points="18,17 13,12 18,7"/>
              </svg>
            </button>
          </div>
        </div>
        <div class="sidebar-content" id="fileTree">
          <div class="sidebar-empty">
            <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" opacity="0.3">
              <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"/>
            </svg>
            <p>点击上方按钮<br/>打开项目文件夹</p>
          </div>
        </div>
      </aside>

      <!-- 编辑器面板 -->
      <div class="editor-panel" id="editorPanel">
        <div class="panel-header">
          <span>编辑</span>
        </div>
        <div class="editor-container" id="editorContainer"></div>
      </div>

      <!-- 拖拽分隔条 -->
      <div class="resizer" id="resizer">
        <div class="resizer-handle"></div>
      </div>

      <!-- 预览面板 -->
      <div class="preview-panel" id="previewPanel">
        <div class="panel-header">
          <span>预览</span>
        </div>
        <div
          class="preview-container markdown-body"
          id="previewContainer"
        ></div>
      </div>
    </main>

    <!-- 底部状态栏 -->
    <footer class="statusbar" id="statusbar">
      <div class="statusbar-left">
        <span class="status-item" id="statusLines">行: 1</span>
        <span class="status-item" id="statusCursor">列: 1</span>
        <span class="status-item" id="statusSelection"></span>
      </div>
      <div class="statusbar-right">
        <span class="status-item" id="statusWords">字数: 0</span>
        <span class="status-item" id="statusChars">字符: 0</span>
        <span class="status-item">Markdown</span>
      </div>
    </footer>

    <script type="module" src="./editor.js"></script>
  </body>
</html>
